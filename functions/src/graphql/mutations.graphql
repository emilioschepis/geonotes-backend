mutation CreateUser($id: String!, $email: String!, $username: String!) {
  user: insert_user_one(object: { id: $id, email: $email, username: $username }) {
    createdAt: created_at
  }
}

mutation CreateNote(
  $id: uuid!
  $user_id: String!
  $content: String!
  $latitude: Float!
  $longitude: Float!
  $map_image_url: String
) {
  note: insert_note_one(
    object: {
      id: $id
      user_id: $user_id
      content: $content
      location: { type: "Point", coordinates: [$longitude, $latitude] }
      map_image_url: $map_image_url
    }
  ) {
    id
  }
}

mutation RegisterView($user_id: String!, $note_id: uuid!) {
  view: insert_note_view_one(
    object: { user_id: $user_id, note_id: $note_id }
    on_conflict: { constraint: note_view_pkey, update_columns: [] }
  ) {
    note_id
  }
}
